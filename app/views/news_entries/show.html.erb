<% title @news_entry.name %>
<% description truncated_text(@news_entry.content) %>

<% if policy(@news_entry).new? or policy(@news_entry).edit? or
  policy(@news_entry).destroy? %>
  <div class="ui three item stackable menu">
    <% if policy(@news_entry).new? %>
      <%= link_to new_news_entry_path, class: 'item' do %>
        <i class="write icon"></i> New News Entry
      <% end %>
    <% end %>
    <% if policy(@news_entry).edit? %>
      <%= link_to edit_news_entry_path(@news_entry), class: 'item' do %>
        <i class="edit icon"></i> Edit News Entry
      <% end %>
    <% end %>
    <% if policy(@news_entry).destroy? %>
      <%= link_to @news_entry, data: {
        confirm: 'Are you sure you want to delete this news entry?' },
        method: :delete, class: 'item' do %>
        <i class="trash icon"></i> Delete News Entry
      <% end %>
    <% end %>
  </div>
<% end %>

<% if @news_entry.contributor_profile.avatar_file_name.blank? %>
  <%= image_tag "default-avatar.jpg", class: "ui tiny circular image" %>
<% else %>
  <%= image_tag @news_entry.contributor_profile.avatar.url(:thumbnail),
    class: "ui tiny circular image" %>
  <br />
<% end %>
<p class="name_and_date">Published by
  <%= link_to @news_entry.contributor_profile.name, 
    @news_entry.contributor_profile %>
  <% if @news_entry.publish %>
    <%= local_time_ago @news_entry.published_at %>.
  <% else %>
    - <span class="unpublished">Unpublished</span>
  <% end %>
</p>
<%= raw news_entry_markdown_to_html @news_entry.content %>

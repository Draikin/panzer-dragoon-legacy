<% title @news_entry.name %>
<% description truncated_text(@news_entry.content) %>

<% if policy(@news_entry).new? or policy(@news_entry).edit? or
  policy(@news_entry).destroy? %>
  <ul class="administration">
    <% if policy(@news_entry).new? %>
      <li><%= link_to 'New News Entry', new_news_entry_path %></li>
    <% end %>
    <% if policy(@news_entry).edit? %>
      <li>
        <%= link_to 'Edit News Entry', edit_news_entry_path(@news_entry) %>
      </li>
    <% end %>
    <% if policy(@news_entry).destroy? %>
      <li>
        <%= link_to 'Delete News Entry', @news_entry, data: {
          confirm: 'Are you sure you want to delete this news entry?' },
          method: :delete %>
      </li>
    <% end %>
  </ul>
<% end %>

<div id="resources">
  <div class="resource">
    <div class="comment_thumbnail">
      <% if @news_entry.contributor_profile.avatar_file_name.blank? %>
        <%= image_tag("default-avatar.jpg") %>
      <% else %>
        <%= image_tag @news_entry.contributor_profile.avatar.url(:thumbnail) %>
        <br />
      <% end %>
    </div>
    <div class="comment_details">
      <p class="name_and_date">Published by
        <%= link_to @news_entry.contributor_profile.name, 
          @news_entry.contributor_profile %>
        <% if @news_entry.publish %>
          <%= local_time_ago @news_entry.published_at %>.
        <% else %>
          - <span class="unpublished">Unpublished</span>
        <% end %>
      </p>
      <%= raw news_entry_markdown_to_html @news_entry.content %>
    </div>
  </div>
</div>

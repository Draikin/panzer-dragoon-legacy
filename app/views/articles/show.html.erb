<% title @article.name %>
<% description @article.description %>

<% if !@article.publish %>
  <p class="unpublished">Unpublished</p>
<% elsif !@article.category.publish %>
  <p class="unpublished">Published in Unpublished Category</p>
<% end %>

<% if policy(@article).new? or policy(@article).edit? or 
  policy(@article).destroy? %>
  <div class="ui three item stackable menu">
    <% if policy(@article).new? %>
      <%= link_to new_article_path(category: @article.category), 
        class: 'item' do %>
        <i class="write icon"></i> New Article
      <% end %>
    <% end %>
    <% if policy(@article).edit? %>
      <%= link_to edit_article_path(@article), class: 'item' do %>
        <i class="edit icon"></i> Edit Article
      <% end %>
    <% end %>
    <% if policy(@article).destroy? %>
      <%= link_to @article,
        data: { confirm: 'Are you sure you want to delete this article?' },
        method: :delete, class: 'item' do %>
        <i class="trash icon"></i> Delete Article
      <% end %>
    <% end %>
  </div>
<% end %>

<h2>Written By:</h2>
<ul>
  <% @article.contributor_profiles.each do |contributor_profile| %>
    <li><%= link_to contributor_profile.name, contributor_profile %></li>
  <% end %>
</ul>

<p id="description"><%= @article.description %></p>

<%= raw illustrated_markdown_to_html @article.id, "Article", @article.content %>

<%= render partial: 'shared/related_encyclopaedia_entries' %>

<div class="ui breadcrumb">
  <%= link_to "Home", root_url, class: 'section' %>
  <div class="divider"> / </div>
  <%= link_to 'Articles', articles_path, class: 'section' %>
  <div class="divider"> / </div>
  <%= link_to @article.category.name, category_path(@article.category), 
    class: 'section' %>
  <div class="divider"> / </div>
  <div class="active section"><%= @article.name %></div>
</div>

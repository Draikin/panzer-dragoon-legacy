<% title @article.name %>
<% description @article.description %>

<% if !@article.publish %>
  <span class="label label-warning">Unpublished</span>
<% elsif !@article.category.publish %>
  <span class="label label-warning">Published in Unpublished Category</span>
<% end %>

<% if policy(Article).new? ||
  policy(@article).edit? ||
  policy(@article).destroy?
%>
  <div class="btn-group" role="group">
    <% if policy(Article).new? %>
      <%= link_to new_article_path(category: @article.category),
        { class: 'btn btn-secondary', role: 'button' } do %>
        <%= fa_icon 'pencil' %> New Article
      <% end %>
    <% end %>
    <% if policy(@article).edit? %>
      <%= link_to edit_article_path(@article),
        { class: 'btn btn-secondary', role: 'button' } do %>
        <%= fa_icon 'edit' %> Edit Article
      <% end %>
    <% end %>
    <% if policy(@article).destroy? %>
      <%= link_to @article,
        data: { confirm: 'Are you sure you want to delete this article?' },
        method: :delete,
        class: 'btn btn-danger',
        role: 'button' do %>
        <%= fa_icon 'trash' %> Delete Article
      <% end %>
    <% end %>
  </div>
<% end %>

<h2>Written By:</h2>
<ul>
  <% @article.contributor_profiles.each do |contributor_profile| %>
    <li><%= link_to contributor_profile.name, contributor_profile %></li>
  <% end %>
</ul>

<p id="description"><%= @article.description %></p>

<%= raw illustrated_markdown_to_html @article.id, "Article", @article.content %>

<%= render 'shared/show/related_encyclopaedia_entries' %>

<ol class="breadcrumb">
  <li><%= link_to 'Home', root_url %></li>
  <li><%= link_to 'Articles', articles_path %></li>
  <li>
    <%= link_to @article.category.name, category_path(@article.category) %>
  </li>
  <li class="active"><%= @article.name %></li>
</ol>

<% if @contributor_profile %>
  <% title "#{@contributor_profile.name}'s Downloads" %>
<% elsif params[:filter] == 'draft' %>
  <% title "Draft Downloads" %>
<% else %>
  <% title "Downloads" %>
<% end %>

<% if policy(Category).new? || policy(Download).new? %>
  <div class="btn-group" role="group">
    <% if policy(Category).new? %>
      <%= link_to new_category_path(category_type: :download),
        { class: 'btn btn-secondary', role: 'button' } do %>
        <%= fa_icon 'tag' %> New Category
      <% end %>
    <% end %>
    <% if policy(Download).new? %>
      <%= link_to new_download_path,
        { class: 'btn btn-secondary', role: 'button' } do %>
        <%= fa_icon 'upload' %> New Download
      <% end %>
    <% end %>
  </div>
<% end %>

<% unless params[:contributor_profile_id] || params[:filter] %>
  <% if @categories.present? %>
    <h2>Download Categories</h2>
    <ul class="list-group">
      <% @categories.each do |category| %>
        <li class="list-group-item">
          <%= link_to category.name, category %>
          <% unless category.publish %>
            <span class="label label-warning">Unpublished</span>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% end %>
  <% if @downloads.present? %>
    <h2>All Downloads</h2>
  <% end %>
<% end %>

<%= render 'list' %>

<ol class="breadcrumb">
  <li class="breadcrumb-item"><%= link_to 'Home', root_url %></li>
  <li class="breadcrumb-item active">Downloads</li>
</ol>

<% if params[:filter] == 'draft' %>
  <% title "Draft Encyclopaedia Entries" %>
<% else %>
  <% title "Encyclopaedia" %>
<% end %>

<% if policy(CategoryGroup).new? ||
  policy(Category).new? ||
  policy(EncyclopaediaEntry).new?
%>
  <div class="btn-group" role="group">
    <% if policy(CategoryGroup).new? %>
      <%= link_to new_category_group_path(
          category_group_type: :encyclopaedia_entry
        ),
        { class: 'btn btn-secondary', role: 'button' } do %>
        <%= fa_icon 'tag' %> New Category Group
      <% end %>
    <% end %>
    <% if policy(Category).new? %>
      <%= link_to new_category_path(category_type: :encyclopaedia_entry),
        { class: 'btn btn-secondary', role: 'button' } do %>
        <%= fa_icon 'tag' %> New Category
      <% end %>
    <% end %>
    <% if policy(EncyclopaediaEntry).new? %>
      <%= link_to new_encyclopaedia_entry_path,
        { class: 'btn btn-secondary', role: 'button' } do %>
        <%= fa_icon 'pencil' %> New Encyclopaedia Entry
      <% end %>
    <% end %>
  </div>
<% end %>

<% if @category_groups.present? %>
  <h2>Encyclopaedia Categories</h2>
  <%= render partial: 'site_map/category_groups',
    locals: { category_groups: @category_groups }
  %>
<% end %>

<% if @encyclopaedia_entries.present? %>
  <% unless params[:filter] %>
    <h2>All Encyclopaedia Entries</h2>
  <% end %>
  <%= render 'list' %>
<% end %>

<ol class="breadcrumb">
  <li class="breadcrumb-item"><%= link_to 'Home', root_url %></li>
  <li class="breadcrumb-item active">Encyclopaedia</li>
</ol>

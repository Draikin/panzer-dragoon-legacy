<% if @contributor_profile %>
  <% title "#{@contributor_profile.name}'s Music Tracks" %>
<% elsif params[:filter] == 'draft' %>
  <% title "Draft Music Tracks" %>
<% else %>
  <% title "Music Tracks" %>
<% end %>

<% if policy(MusicTrack).new? %>
  <div class="ui one item stackable menu">
    <%= link_to new_music_track_path, class: "item" do %>
      <i class="upload icon"></i> New Music Track
    <% end %>
  </div>
<% end %>

<% unless params[:contributor_profile_id] or params[:filter] %>
  <% if @category_groups.present? %>
    <div class="ui segment">
      <h2>Music Categories</h2>
      <%= render partial: 'site_map/category_groups', locals: {
        category_groups: @category_groups } %>
    </div>
  <% end %>
  <% if @music_tracks.present? %>
    <h2>All Music Tracks</h2>
  <% end %>
<% end %>

<% if @music_tracks %>
  <div class="ui relaxed list">
    <% @music_tracks.each do |music_track| %>
      <div class="item">
        <div class="content">
          <div class="header">
            <h2><%= link_to music_track.name, music_track %></h2>
          </div>
          <% unless music_track.publish %>
            <p class="unpublished">Unpublished</p>
          <% end %>
          <div class="description">
            <p><%= music_track.description %></p>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <%= paginate @music_tracks %>
<% end %>

<div class="ui breadcrumb">
  <%= link_to "Home", root_url, class: 'section' %>
  <div class="divider"> / </div>
  <div class="active section">Music</div>
</div>

<% if @contributor_profile %>
  <% title "#{@contributor_profile.name}'s Music Tracks" %>
<% elsif params[:filter] == 'draft' %>
  <% title "Draft Music Tracks" %>
<% else %>
  <% title "Music Tracks" %>
<% end %>

<% if policy(CategoryGroup).new? or policy(Category).new? or
  policy(MusicTrack).new? %>
  <ul class="administration">
    <% if policy(CategoryGroup).new? %>
      <li>
        <%= link_to 'New Category Group', new_category_group_path(
          category_group_type: :music_track) %>
      </li>
    <% end %>
    <% if policy(Category).new? %>
      <li>
        <%= link_to 'New Category', new_category_path(
          category_type: :music_track) %>
      </li>
    <% end %>
    <% if policy(MusicTrack).new? %>
      <li><%= link_to 'New Music Track', new_music_track_path %></li>
    <% end %>
  </ul>
<% end %>

<% unless params[:contributor_profile_id] or params[:filter] %>
  <% if @category_groups.present? %>
    <h2>Music Categories</h2>
    <%= render partial: 'site_map/category_groups', locals: {
      category_groups: @category_groups } %>
  <% end %>
  <% if @music_tracks.present? %>
    <h2>All Music Tracks</h2>
  <% end %>
<% end %>

<% if @music_tracks %>
  <ul class="media-list">
    <% @music_tracks.each do |music_track| %>
      <li class="media">
        <div class="media-body">
          <h2><%= link_to music_track.name, music_track %></h2>
          <% unless music_track.publish %>
            <span class="label label-warning">Unpublished</span>
          <% end %>
          <p><%= music_track.description %></p>
        </div>
      </li>
    <% end %>
  </ul>
  <%= paginate @music_tracks %>
<% end %>

<ol class="breadcrumb">
  <li><%= link_to 'Home', root_url %></li>
  <li class="active">Music</li>
</ol>

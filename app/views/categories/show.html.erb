<% title @category.name %>
<% description @category.description %>

<% unless @category.publish %>
  <p class="unpublished">Unpublished</p>
<% end %>

<% if policy(Category).new? or policy(@category).edit? or 
  policy(@category).destroy? %>
  <div class="ui two item stackable menu">
    <% if policy(Category).new? %>
      <%= link_to new_category_path, class: 'item' do %>
        <i class="tag icon"></i> New Category
      <% end %>
    <% end %>
    <% if policy(@category).edit? %>
      <%= link_to edit_category_path(@category), class: 'item' do %>
        <i class="configure icon"></i> Edit Category
      <% end %>
    <% end %>
    <% if policy(@category).destroy? %>
      <%= link_to @category,
        data: { confirm: 'Are you sure you want to delete this category?' },
        method: :delete, class: 'item' do %>
        <i class="trash icon"></i> Delete Category
      <% end %>
    <% end %>
  </div>
<% end %>

<%= @category.description %>

<% if @articles %>
  <h2>Articles in this Category</h2>
  <% if policy(Article).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_article_path(category: @category), class: 'item' do %>
        <i class="write icon"></i> New Article
      <% end %>
    </div>
  <% end %>
  <%= render 'articles/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Articles', articles_path %></p>
<% end %>

<% if @downloads %>
  <h2>Downloads in this Category</h2>
  <% if policy(Download).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_download_path(category: @category), class: 'item' do %>
        <i class="write icon"></i> New Download
      <% end %>
    </div>
  <% end %>
  <%= render 'downloads/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Downloads', downloads_path %></p>
<% end %>

<% if @encyclopaedia_entries %>
  <h2>Encyclopaedia Entries in this Category</h2>
  <% if policy(EncyclopaediaEntry).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_encyclopaedia_entry_path(category: @category), 
        class: 'item' do %>
        <i class="write icon"></i> New Encyclopaedia Entry
      <% end %>
    </div>
  <% end %>
  <%= render 'encyclopaedia_entries/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Encyclopaedia', encyclopaedia_entries_path %></p>
<% end %>

<% if @links %>
  <h2>Links in this Category</h2>
  <% if policy(Link).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_link_path(category: @category), class: 'item' do %>
        <i class="write icon"></i> New Link
      <% end %>
    </div>
  <% end %>
  <%= render 'links/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Links', links_path %></p>
<% end %>

<% if @music_tracks %>
  <h2>Music Tracks in this Category</h2>
  <% if policy(MusicTrack).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_music_track_path(category: @category), class: 'item' do %>
        <i class="write icon"></i> New Music Track
      <% end %>
    </div>
  <% end %>
  <%= render 'music_tracks/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Music', music_tracks_path %></p>
<% end %>

<% if @pictures %>
  <h2>Pictures in this Category</h2>
  <% if policy(Picture).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_picture_path(category: @category), class: 'item' do %>
        <i class="write icon"></i> New Picture
      <% end %>
    </div>
  <% end %>
  <%= render 'pictures/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Pictures', pictures_path %></p>
<% end %>

<% if @resources %>
  <h2>Resources in this Category</h2>
  <% if policy(Resource).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_resource_path(category: @category), class: 'item' do %>
        <i class="write icon"></i> New Resource
      <% end %>
    </div>
  <% end %>
  <%= render 'resources/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Resources', resources_path %></p>
<% end %>

<% if @stories %>
  <h2>Stories in this Category</h2>
  <% if policy(Story).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_story_path(category: @category), class: 'item' do %>
        <i class="write icon"></i> New Story
      <% end %>
    </div>
  <% end %>
  <%= render 'stories/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Stories', stories_path %></p>
<% end %>

<% if @videos %>
  <h2>Videos in this Category</h2>
  <% if policy(Video).new? %>
    <div class="ui one item stackable menu">
      <%= link_to new_video_path(category: @category), class: 'item' do %>
        <i class="write icon"></i> New Video
      <% end %>
    </div>
  <% end %>
  <%= render 'videos/list' %>
  <p><%= link_to 'Site Map', site_map_path %> |
    <%= link_to 'Videos', videos_path %></p>
<% end %>

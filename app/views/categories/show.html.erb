<% title @category.name %>
<% description @category.description %>

<% unless @category.publish %>
  <p class="unpublished">Unpublished</p>
<% end %>

<% if policy(CategoryGroup).new? ||
  policy(Category).new? ||
  policy(@category).edit? ||
  policy(@category).destroy?
%>
  <div class="btn-group" role="group">
    <% if policy(CategoryGroup).new? %>
      <%= link_to 'New Category Group',
        new_category_group_path,
        { class: 'btn btn-secondary', role: 'button' }
      %>
    <% end %>
    <% if policy(Category).new? %>
      <%= link_to 'New Category',
        new_category_path,
        { class: 'btn btn-secondary', role: 'button' }
      %>
    <% end %>
    <% if policy(@category).edit? %>
      <%= link_to 'Edit Category',
        edit_category_path(@category),
        { class: 'btn btn-secondary', role: 'button' }
      %>
    <% end %>
    <% if policy(@category).destroy? %>
      <%= link_to 'Delete Category',
        @category,
        data: { confirm: 'Are you sure you want to delete this category?' },
        method: :delete,
        class: 'btn btn-danger',
        role: 'button'
      %>
    <% end %>
  </div>
<% end %>

<%= @category.description %>

<% if @articles %>
  <h2>Articles in this Category</h2>
  <% if policy(Article).new? %>
    <%= link_to 'New Article',
      new_article_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'articles/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Articles', articles_path %></li>
    <li class="active"><%= @category.name %></li>
  </ol>
<% end %>

<% if @downloads %>
  <h2>Downloads in this Category</h2>
  <% if policy(Download).new? %>
    <%= link_to 'New Download',
      new_download_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'downloads/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Downloads', downloads_path %></li>
    <li class="active"><%= @category.name %></li>>
  </ol>
<% end %>

<% if @encyclopaedia_entries %>
  <h2>Encyclopaedia Entries in this Category</h2>
  <% if policy(EncyclopaediaEntry).new? %>
    <%= link_to 'New Encyclopaedia Entry',
      new_encyclopaedia_entry_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'encyclopaedia_entries/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Encyclopaedia', encyclopaedia_entries_path %></li>
    <li class="active"><%= @category.name %></li>
  </ol>
<% end %>

<% if @links %>
  <h2>Links in this Category</h2>
  <% if policy(Link).new? %>
    <%= link_to 'New Link',
      new_link_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'links/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Links', links_path %></li>
    <li class="active"><%= @category.name %></li>
  </ol>
<% end %>

<% if @music_tracks %>
  <h2>Music Tracks in this Category</h2>
  <% if policy(MusicTrack).new? %>
    <%= link_to 'New Music Track',
      new_music_track_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'music_tracks/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Music', music_tracks_path %></li>
    <li class="active"><%= @category.name %></li>
  </ol>
<% end %>

<% if @pictures %>
  <h2>Pictures in this Category</h2>
  <% if policy(Picture).new? %>
    <%= link_to 'New Picture',
      new_picture_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'pictures/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Pictures', pictures_path %></li>
    <li class="active"><%= @category.name %></li>
  </ol>
<% end %>

<% if @resources %>
  <h2>Resources in this Category</h2>
  <% if policy(Resource).new? %>
    <%= link_to 'New Resource',
      new_resource_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'resources/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Resources', resources_path %></li>
    <li class="active"><%= @category.name %></li>
  </ol>
<% end %>

<% if @stories %>
  <h2>Stories in this Category</h2>
  <% if policy(Story).new? %>
    <%= link_to 'New Story',
      new_story_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'stories/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Stories', stories_path %></li>
    <li class="active"><%= @category.name %></li>
  </ol>
<% end %>

<% if @videos %>
  <h2>Videos in this Category</h2>
  <% if policy(Video).new? %>
    <%= link_to 'New Video',
      new_video_path(category: @category),
      { class: 'btn btn-secondary', role: 'button' }
    %>
  <% end %>
  <%= render 'videos/list' %>
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_url %></li>
    <li><%= link_to 'Videos', videos_path %></li>
    <li class="active"><%= @category.name %></li>
  </ol>
<% end %>
